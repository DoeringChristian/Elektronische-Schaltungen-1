% .:: Laden der LaTeX4EI Formelsammlungsvorlage
\documentclass[european]{latex4ei_sheet}

\title{Elektronische \\ Schaltungen \\ Cheatsheet}

\RequirePackage{latex4ei/latex4ei_unicode}

% -- begin custom TOC for circuits
\usepackage{tocloft}

\newcommand{\listcircuitname}{Liste der Schaltungen}
\newlistof{circuit}{cir}{}
\newcommand{\circuit}[2]{%
	\refstepcounter{circuit}
	\section{#1}
	\includegraphics[width=5em]{#2}
	\addcontentsline{cir}{blabla}
	{\parbox{\linewidth}{\includegraphics[width=\linewidth]{#2}\\#1\hfill}\ \\}}
\let\mylistofcircuit\listofcircuit
\renewcommand{\listofcircuit}{\subsection*{\listcircuitname}\vspace{-1.5em}\begin{multicols}{3}\mylistofcircuit\end{multicols}}
% -- end


% DOCUMENT_BEGIN ===============================================================
\begin{document}

\IfFileExists{git.id}{\input{git.id}}{}
\ifdefined\GitRevision\mydate{\GitNiceDate\ (git \GitRevision)}\fi

% Title (needs ./img/Logo.pdf)
\maketitle

\listofcircuit

\circuit{Stromspiegel mit Widerstand}{img/stromspiegel-mit-widerstand.pdf}
Annahme: Sättigung $\rightarrow V_{\ir GS1} = V_{\ir DD}-RI_{\ir IN}$\\
Überprüfe, ob Annahme korrekt\\
$\frac{I_{\ir out}}{I_{\ir in}} = \frac{(W/L)_2}{(W/L)_1}$
\circuit{Schalter (Transmission-Gate)}{img/transmission-gate.pdf}
$V_{\ir out} \approx V_{\ir in} \rightarrow$ Transistoren in Triodenbereich\\
\circuit{Transistor mit resistiver Last (Source an GND, immer +)}{img/transistor-mit-resistiver-last-1.pdf}
	%TODO ESB
	Verstärkung: $\frac{V_{\ir out}}{V_{\ir in}} = g_{\ir m1}(r_{\ir DS1}\parallel R_D)$\\
	$r_{\ir out} = r_{\ir DS1}\parallel R_D$\\
\circuit{Transistor mit resistiver Last ($V_{\ir in}$ an Source)}{img/transistor-mit-resistiver-last-2.pdf}	
	$A \approx g_mR_d$\\
	$r_\text{out} = r_{DS} \parallel R_D \approx R_D$\\
	$r_{\ir in} = R_D \frac{r_{\ir DS}\parallel \frac{1}{g_m}}{r_{\ir DS}\parallel R_D}$
	
\circuit{Transistor mit resistiver Last ($R_S$ an Source)}{img/transistor-mit-resistiver-last-3.pdf}	
	
	
\circuit{Sourceschaltung mit Stromquelle (- - -)}{img/sourceschaltung-mit-stromquelle.pdf}
%TODO ESB
Verstärkung: $\frac{V_{\ir out}}{V_{\ir in}} = -g_{\ir m1}r_{\ir DS1}$\\
$r_{\ir out} = r_{\ir DS1}$
\circuit{Sourceschaltung mit aktiver Last (- -)}{img/sourceschaltung-mit-aktiver-last.pdf}
%TODO ESB
Verstärkung: $\frac{V_{\ir out}}{V_{\ir in}} = -g_{\ir m1}(r_{\ir DS1}\parallel r_{\ir DS2})$\\
$r_{\ir out} = r_{\ir DS1}\parallel r_{\ir DS2}$
\circuit{Sourceschaltung mit Diodenlast [$V_{\ir in}$ am unteren Transistor (-)]}{img/sourceschaltung-mit-diodenlast-1.pdf}
	%TODO ESB
	Verstärkung: $\frac{V_{\ir out}}{V_{\ir in}} = -g_{\ir m1}\left( r_{\ir DS1}\parallel r_{\ir DS2}\parallel \frac{1}{g_{\ir m2}}\right)$\\
	$r_{\ir out} = r_{\ir DS1}\parallel r_{\ir DS2}\parallel \frac{1}{g_{\ir m2}}$
\circuit{Sourceschaltung mit Diodenlast [$V_{\ir in}$ am oberen Transistor]}{img/sourceschaltung-mit-diodenlast-2.pdf}

\circuit{Drainschaltung mit aktiver Last [ohne $C_L$ ($\approx 1$)]}{img/drainschaltung-mit-aktiver-Last-1.pdf}
	Verstärkung: $\frac{V_{\ir out}}{V_{\ir in}} = \frac{g_{\ir m1}(r_{\ir DS1}\parallel r_{\ir DS2})}{1 + g_{\ir m1}(r_{\ir DS1}\parallel r_{\ir DS2})}$ (kann auch $<1$ sein)\\
	$r_{\ir out} = \frac{r_{\ir DS1}\parallel r_{\ir DS2}}{1 + g_{\ir m1}(r_{\ir DS1}\parallel r_{\ir DS2})}$
\circuit{Drainschaltung mit aktiver Last [mit $C_L$]}{img/drainschaltung-mit-aktiver-Last-2.pdf}
	%TODO ESB
	Verstärkung: $A(\omega) = \frac{g_{\ir m1}(r_{\ir DS1}\parallel r_{\ir DS2})}{1 + g_{\ir m1}(r_{\ir DS1}\parallel r_{\ir DS2})+\j\omega C_L(r_{\ir DS1}\parallel r_{\ir DS2})}$\\
	Näherung: $\frac{g_{\ir m1}}{g_{\ir m1}+\j\omega C_L}$\\
	Betrag: $\abs{A(\omega)} = \frac{1}{\sqrt{1+(\omega C_L / g_{\ir m1})^2}}$\\
	Phase: $\phi(A(\omega) = \arctan{(-\omega C_L / g_{\ir m1})}$\\

\circuit{Stromspiegel mit Stromquelle}{img/stromspiegel-mit-stromquelle.pdf}
\circuit{Differenzstufe mit resistiver Last}{img/differenzstufe-mit-resistiver-last.pdf}
%\circuit{Differenzstufe mit Stromspiegel-Last (pMOS)}{img/differenzstufe-mit-stromspiegel-last-1.pdf}
\circuit{Differenzstufe mit Stromspiegel-Last (nMOS)}{img/differenzstufe-mit-stromspiegel-last-2.pdf}
\circuit{Differenzstufe mit Diodenlast}{img/differenzstufe-mit-diodenlast.pdf}

\section{x1}

\section{x2}

\section{x3}

-Differenzstufe mit Stromspiegel





% DOCUMENT_END =================================================================
\end{document}